<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propuesta: IA para Creaci√≥n de Reglas de Negocio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            padding: 40px;
        }

        .section-title {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .executive-summary {
            background: #f8f9ff;
            border-left: 5px solid #667eea;
            padding: 30px;
            margin: 20px 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .feature-card ul {
            list-style: none;
            padding-left: 0;
        }

        .feature-card ul li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .feature-card ul li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .pros {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 25px;
            border-radius: 5px;
        }

        .cons {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 25px;
            border-radius: 5px;
        }

        .pros h3, .cons h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .pros h3 {
            color: #2e7d32;
        }

        .cons h3 {
            color: #e65100;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .mockup {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border: 1px solid #ddd;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9ff;
        }

        .cta-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            margin-top: 40px;
            border-radius: 8px;
        }

        .cta-box h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .cta-box p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .implementation-phase {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .implementation-phase h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .layer {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 15px 0;
        }

        .layer h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .pros-cons {
                grid-template-columns: 1fr;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 20px;
            }
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .metric {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            display: block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>ü§ñ Asistente IA para Reglas de Negocio</h1>
            <p>Propuesta de integraci√≥n para Parse</p>
        </div>

        <!-- RESUMEN EJECUTIVO -->
        <div class="section">
            <h2 class="section-title">üìã Resumen Ejecutivo</h2>

            <div class="executive-summary">
                <h3 style="margin-bottom: 15px; font-size: 1.5em;">¬øQu√© proponemos?</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    Integrar un <strong>asistente de IA</strong> en la interfaz web de Parse que permita a los clientes
                    <span class="highlight">crear y modificar reglas de negocio usando lenguaje natural</span>,
                    sin necesidad de escribir c√≥digo ni contactar soporte t√©cnico.
                </p>
            </div>

            <h3 style="margin-top: 40px; margin-bottom: 20px; font-size: 1.5em;">¬øC√≥mo funciona?</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>1Ô∏è‚É£ Cliente describe</h3>
                    <p>"Quiero que si el CUIT empieza con 20 y el monto supera $100K, se marque para revisi√≥n manual"</p>
                </div>
                <div class="feature-card">
                    <h3>2Ô∏è‚É£ IA genera regla</h3>
                    <p>El sistema traduce la descripci√≥n a una regla de negocio estructurada y validada</p>
                </div>
                <div class="feature-card">
                    <h3>3Ô∏è‚É£ Preview y prueba</h3>
                    <p>Se muestra c√≥mo afectar√≠a a documentos reales antes de activarla</p>
                </div>
                <div class="feature-card">
                    <h3>4Ô∏è‚É£ Aprobaci√≥n y activaci√≥n</h3>
                    <p>Cliente aprueba y la regla queda activa inmediatamente</p>
                </div>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h3>‚úÖ Beneficios</h3>
                    <ul>
                        <li><strong>Autonom√≠a del cliente</strong>: No depende de soporte t√©cnico</li>
                        <li><strong>Time-to-market</strong>: De d√≠as a minutos</li>
                        <li><strong>Reducci√≥n de tickets</strong>: Menos solicitudes de configuraci√≥n</li>
                        <li><strong>Mejor UX</strong>: Interfaz m√°s intuitiva</li>
                        <li><strong>Escalabilidad</strong>: Soporta crecimiento sin aumentar equipo</li>
                        <li><strong>Diferenciaci√≥n</strong>: Feature premium vs competencia</li>
                    </ul>
                </div>
                <div class="cons">
                    <h3>‚ö†Ô∏è Consideraciones</h3>
                    <ul>
                        <li><strong>Costos de IA</strong>: ~$0.001-0.003 por regla generada</li>
                        <li><strong>Desarrollo</strong>: 2-3 semanas implementaci√≥n inicial</li>
                        <li><strong>Testing</strong>: Requiere pruebas exhaustivas de seguridad</li>
                        <li><strong>Mantenimiento</strong>: Monitoreo de calidad de generaciones</li>
                    </ul>
                </div>
            </div>

            <h3 style="margin-top: 40px; margin-bottom: 20px; font-size: 1.5em;">üìä Impacto estimado</h3>
            <div class="feature-grid">
                <div class="feature-card" style="text-align: center;">
                    <span class="metric">-70%</span>
                    <p>Tickets de soporte para configuraci√≥n</p>
                </div>
                <div class="feature-card" style="text-align: center;">
                    <span class="metric">5 min</span>
                    <p>vs 2-3 d√≠as tiempo de implementaci√≥n</p>
                </div>
                <div class="feature-card" style="text-align: center;">
                    <span class="metric">$50-100</span>
                    <p>USD/mes costo estimado de API</p>
                </div>
            </div>

            <h3 style="margin-top: 40px; margin-bottom: 20px; font-size: 1.5em;">üéØ Casos de uso reales</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Escenario</th>
                        <th>Antes (actual)</th>
                        <th>Despu√©s (con IA)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Cliente necesita regla nueva</td>
                        <td>Email a soporte ‚Üí desarrollo ‚Üí deploy (2-3 d√≠as)</td>
                        <td>Describe en UI ‚Üí aprueba ‚Üí activa (5 minutos)</td>
                    </tr>
                    <tr>
                        <td>Modificar umbral de monto</td>
                        <td>Ticket soporte ‚Üí cambio c√≥digo ‚Üí testing</td>
                        <td>Edita con IA ‚Üí preview ‚Üí guarda</td>
                    </tr>
                    <tr>
                        <td>Regla para nuevo tipo de documento</td>
                        <td>Reuni√≥n t√©cnica ‚Üí desarrollo custom</td>
                        <td>Describe comportamiento ‚Üí IA genera</td>
                    </tr>
                    <tr>
                        <td>Testing de regla antes de producci√≥n</td>
                        <td>Deploy a staging ‚Üí pruebas manuales</td>
                        <td>Dry-run autom√°tico con docs reales</td>
                    </tr>
                </tbody>
            </table>

            <div class="cta-box">
                <h2>üöÄ Recomendaci√≥n</h2>
                <p>Implementar en <strong>2 fases</strong>:</p>
                <br>
                <p><strong>Fase 1 (MVP - 2 semanas)</strong>: Asistente inline simple, solo creaci√≥n de reglas b√°sicas</p>
                <p><strong>Fase 2 (3-4 semanas)</strong>: Chat conversacional, edici√≥n de reglas existentes, historial</p>
            </div>
        </div>

        <!-- DETALLE T√âCNICO -->
        <div class="section" style="background: #fafafa;">
            <h2 class="section-title">üîß Detalle T√©cnico</h2>

            <h3 style="margin-top: 30px; margin-bottom: 20px; font-size: 1.4em;">1. Arquitectura de Seguridad (5 capas)</h3>

            <div class="layer">
                <h4>Capa 1: Generaci√≥n Restringida (Structured Output)</h4>
                <p>La IA no genera c√≥digo libre, sino JSON estrictamente tipado seg√∫n un schema predefinido:</p>
                <div class="code-block">const prompt = `
Genera una regla de negocio con EXACTAMENTE esta estructura:
{
  "nombre": string,
  "condicion": {
    "campo": "cuit" | "monto" | "tipoComprobante",  // Solo estos
    "operador": "equals" | "greaterThan" | "contains",
    "valor": string | number
  },
  "accion": {
    "tipo": "marcarRevision" | "completarCampo" | "rechazar",
    "parametros": {...}
  }
}

Descripci√≥n del usuario: "${userInput}"
`;</div>
                <p><strong>Resultado:</strong> La IA solo puede generar operaciones dentro de un conjunto seguro y limitado.</p>
            </div>

            <div class="layer">
                <h4>Capa 2: Validaci√≥n Backend con Schema (Zod)</h4>
                <p>El JSON generado DEBE pasar validaci√≥n estricta de schema antes de guardarse:</p>
                <div class="code-block">const reglaSchema = z.object({
  nombre: z.string().max(100),
  condicion: z.object({
    campo: z.enum(['cuit', 'monto', 'tipoComprobante']), // Whitelist
    operador: z.enum(['equals', 'greaterThan', 'contains']),
    valor: z.union([z.string(), z.number()])
  }),
  accion: z.object({
    tipo: z.enum(['marcarRevision', 'completarCampo', 'rechazar']),
    parametros: z.record(z.any())
  })
});

// Si la IA genera algo fuera de esto ‚Üí RECHAZADO autom√°ticamente</div>
            </div>

            <div class="layer">
                <h4>Capa 3: Sandbox/Dry-run con Documentos Reales</h4>
                <p>Antes de activar, se prueba la regla con documentos recientes:</p>
                <div class="code-block">// Preview: "Probemos esta regla con 10 documentos recientes"
const preview = await testReglaConDocumentos(reglaGenerada, documentosTest);

// Mostrar al usuario:
// "Esta regla afectar√≠a 3 de 10 documentos de prueba:
//  - Doc #123: Marcar√≠a para revisi√≥n
//  - Doc #456: Marcar√≠a para revisi√≥n
//  - Doc #789: Marcar√≠a para revisi√≥n
//
// ¬øConfirmar?"</div>
            </div>

            <div class="layer">
                <h4>Capa 4: Sistema de Permisos y Aprobaci√≥n</h4>
                <ul>
                    <li><strong>Usuarios normales:</strong> Pueden generar pero queda "pendiente_aprobacion"</li>
                    <li><strong>Admins:</strong> Aprueban antes de activar</li>
                    <li><strong>Super admins:</strong> Pueden activar directamente</li>
                </ul>
            </div>

            <div class="layer">
                <h4>Capa 5: Versionado y Rollback</h4>
                <p>Todas las reglas tienen historial completo y pueden revertirse:</p>
                <div class="code-block">-- Tabla de historial
reglas_negocio_historial (
  id,
  version,
  fecha,
  estado,
  created_by,
  json_regla
)

-- Bot√≥n "Deshacer" disponible en UI</div>
            </div>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">2. Experiencias de Usuario (UX)</h3>

            <h4 style="margin-top: 30px; color: #667eea;">Opci√≥n A: Chat Completo (tipo ChatGPT)</h4>
            <p><strong>Pros:</strong> Conversacional, puede refinar iterativamente, mejor para casos complejos</p>
            <p><strong>Contras:</strong> M√°s complejo de desarrollar, requiere streaming</p>

            <div class="mockup">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Crear Regla con IA                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                         ‚îÇ
‚îÇ  üë§ Usuario:                            ‚îÇ
‚îÇ  "Quiero que si el CUIT empieza con 20  ‚îÇ
‚îÇ   y el monto supera $100K, se marque    ‚îÇ
‚îÇ   para revisi√≥n manual"                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ü§ñ Asistente: ‚öôÔ∏è Analizando...         ‚îÇ
‚îÇ  > Entendido, voy a crear una regla que:‚îÇ
‚îÇ  > 1. Verifica CUIT empiece con "20"    ‚îÇ
‚îÇ  > 2. Verifica monto > 100000           ‚îÇ
‚îÇ  > 3. Marca documento para revisi√≥n     ‚îÇ
‚îÇ  >                                      ‚îÇ
‚îÇ  > ‚úÖ Regla generada                    ‚îÇ
‚îÇ  >                                      ‚îÇ
‚îÇ  > üìä Probando con documentos recientes ‚îÇ
‚îÇ  > ‚úì Aplicada a 3/10 documentos test   ‚îÇ
‚îÇ  >                                      ‚îÇ
‚îÇ  > [Ver regla generada ‚Üì]              ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Nombre: Revisi√≥n CUIT 20 alto...  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Condiciones: CUIT startsWith "20" ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              Monto > 100000       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Acci√≥n: Marcar para revisi√≥n      ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [‚úÖ Aprobar]  [üîÑ Refinar]  [‚ùå Cancelar]‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <h4 style="margin-top: 30px; color: #667eea;">Opci√≥n B: Asistente Inline (Recomendada para MVP)</h4>
            <p><strong>Pros:</strong> M√°s simple, r√°pida de implementar, UX familiar</p>
            <p><strong>Contras:</strong> Menos interactiva, una sola generaci√≥n por vez</p>

            <div class="mockup">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìù Describe la regla en lenguaje natural‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Quiero que si el CUIT empieza con 20‚îÇ‚îÇ
‚îÇ  ‚îÇ y el monto supera $100K, se marque  ‚îÇ‚îÇ
‚îÇ  ‚îÇ para revisi√≥n manual                ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [ü™Ñ Generar regla]                     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚è≥ Generando... (250 tokens)           ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚úÖ Regla generada - Vista previa:      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Nombre: Revisi√≥n CUIT 20 alto monto‚îÇ‚îÇ
‚îÇ  ‚îÇ                                     ‚îÇ‚îÇ
‚îÇ  ‚îÇ Condiciones:                        ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ CUIT empieza con "20"           ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Monto mayor a $100,000          ‚îÇ‚îÇ
‚îÇ  ‚îÇ                                     ‚îÇ‚îÇ
‚îÇ  ‚îÇ Acci√≥n:                            ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚Üí Marcar para revisi√≥n manual     ‚îÇ‚îÇ
‚îÇ  ‚îÇ                                     ‚îÇ‚îÇ
‚îÇ  ‚îÇ üìä Afectar√≠a 3 de 10 docs recientes‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [‚úÖ Guardar]  [üîÑ Refinar]  [‚ùå Descartar]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">3. Implementaci√≥n T√©cnica (Opci√≥n B - MVP)</h3>

            <h4 style="margin-top: 30px;">Frontend - React/Next.js</h4>
            <div class="code-block">const generarRegla = async (descripcion) => {
  setLoading(true);

  const response = await fetch('/api/ai/generar-regla', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ descripcion })
  });

  const { regla, preview, tokens } = await response.json();

  setReglaGenerada(regla);
  setPreview(preview);
  setTokensUsados(tokens);
  setLoading(false);
};</div>

            <h4 style="margin-top: 30px;">Backend - Express + Prisma</h4>
            <div class="code-block">app.post('/api/ai/generar-regla', async (req, res) => {
  const { descripcion } = req.body;

  // 1. Llamar a Claude/Gemini
  const completion = await anthropic.messages.create({
    model: 'claude-3-5-sonnet-20241022',
    messages: [{
      role: 'user',
      content: promptGenerarRegla(descripcion)
    }]
  });

  // 2. Parsear respuesta
  const reglaJSON = JSON.parse(completion.content[0].text);

  // 3. Validar con schema
  const reglaValidada = reglaSchema.parse(reglaJSON);

  // 4. Dry-run con docs de prueba
  const preview = await testReglaConDocumentos(reglaValidada);

  // 5. Retornar todo junto
  res.json({
    regla: reglaValidada,
    preview,
    tokens: completion.usage.total_tokens
  });
});</div>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">4. Plan de Implementaci√≥n</h3>

            <div class="implementation-phase">
                <h4>üì¶ Fase 1: MVP (2 semanas)</h4>
                <ul>
                    <li><strong>Semana 1:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Setup Claude/Gemini API</li>
                            <li>Endpoint backend b√°sico</li>
                            <li>Schema de validaci√≥n</li>
                            <li>Componente UI inline</li>
                        </ul>
                    </li>
                    <li><strong>Semana 2:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Sistema de dry-run/preview</li>
                            <li>Testing de seguridad</li>
                            <li>UI polish</li>
                            <li>Deploy a staging</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="implementation-phase">
                <h4>üöÄ Fase 2: Mejoras (3-4 semanas)</h4>
                <ul>
                    <li>Chat conversacional con streaming</li>
                    <li>Edici√≥n de reglas existentes</li>
                    <li>Historial y rollback</li>
                    <li>Sistema de aprobaciones</li>
                    <li>Analytics de uso</li>
                </ul>
            </div>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">5. Costos Estimados</h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Proveedor</th>
                        <th>Costo</th>
                        <th>Notas</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>API de IA</td>
                        <td>Claude 3.5 Sonnet</td>
                        <td>$3 / 1M tokens input<br>$15 / 1M tokens output</td>
                        <td>~500 tokens por regla = $0.001-0.003</td>
                    </tr>
                    <tr>
                        <td>API de IA</td>
                        <td>Google Gemini (ya tienen)</td>
                        <td>Gratis hasta cierto l√≠mite</td>
                        <td>Puede usar API key existente</td>
                    </tr>
                    <tr>
                        <td>Desarrollo</td>
                        <td>Interno</td>
                        <td>2-5 semanas equipo</td>
                        <td>Seg√∫n fase elegida</td>
                    </tr>
                    <tr>
                        <td>Uso mensual estimado</td>
                        <td>-</td>
                        <td>$50-100 USD/mes</td>
                        <td>Asumiendo 100-300 generaciones/mes</td>
                    </tr>
                </tbody>
            </table>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">6. Ejemplos de Empresas que lo Hacen</h3>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Retool AI</h3>
                    <p>Genera componentes de UI con lenguaje natural</p>
                </div>
                <div class="feature-card">
                    <h3>Zapier AI</h3>
                    <p>Crea workflows de automatizaci√≥n conversacionalmente</p>
                </div>
                <div class="feature-card">
                    <h3>Notion AI</h3>
                    <p>Genera tablas, bases de datos y estructuras</p>
                </div>
                <div class="feature-card">
                    <h3>GitHub Copilot Chat</h3>
                    <p>Genera c√≥digo desde el editor con chat</p>
                </div>
            </div>

            <h3 style="margin-top: 50px; margin-bottom: 20px; font-size: 1.4em;">7. Preguntas Frecuentes</h3>

            <div class="layer">
                <h4>¬øQu√© pasa si la IA genera una regla incorrecta?</h4>
                <p>No se guarda hasta que el usuario la apruebe despu√©s de ver el preview. Adem√°s, todas las reglas tienen historial y pueden revertirse en un click.</p>
            </div>

            <div class="layer">
                <h4>¬øFunciona con nuestro Gemini API existente?</h4>
                <p>S√≠, se puede usar Gemini (ya integrado en Parse) o Claude. Recomendamos Claude para esta funcionalidad por mejor structured output, pero Gemini tambi√©n funciona.</p>
            </div>

            <div class="layer">
                <h4>¬øRequiere entrenar un modelo custom?</h4>
                <p>No. Los modelos generales (Claude/Gemini) ya entienden l√≥gica de negocio. Solo necesitan el schema de reglas en el prompt.</p>
            </div>

            <div class="layer">
                <h4>¬øPuede romper algo en producci√≥n?</h4>
                <p>Pr√°cticamente imposible por las 5 capas de seguridad: schema validation, whitelist de operaciones, dry-run obligatorio, aprobaci√≥n manual y rollback.</p>
            </div>

            <div class="layer">
                <h4>¬øC√≥mo escalamos si tenemos muchas generaciones?</h4>
                <p>Cache de reglas similares, rate limiting por usuario, tier premium para generaciones ilimitadas.</p>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="cta-box" style="margin-top: 0; border-radius: 0;">
            <h2>üí¨ Pr√≥ximos Pasos</h2>
            <p style="margin-top: 20px;">1. Validar propuesta con equipo</p>
            <p>2. Decidir fase de implementaci√≥n (MVP vs completo)</p>
            <p>3. Elegir proveedor IA (Claude vs Gemini)</p>
            <p>4. Kickoff de desarrollo</p>
            <br>
            <p style="font-size: 0.9em; opacity: 0.8;">Documento generado: 31 de octubre de 2025</p>
        </div>
    </div>
</body>
</html>